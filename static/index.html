<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS Ops Automation Roadmap</title>
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32.png?v=3">
  <link rel="icon" type="image/png" sizes="192x192" href="/static/favicon-192.png?v=3">
  <link rel="apple-touch-icon" href="/static/apple-touch-icon.png?v=3">
  <link rel="stylesheet" href="style.css?v=4">
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="header__left">
      <h1 class="header__title">CS Ops Automation Roadmap</h1>
    </div>
    <div class="header__center">
      <div class="controls__search">
        <span class="controls__search-icon">&#128269;</span>
        <input type="text" id="searchInput" placeholder="Search...">
      </div>
      <button class="btn-add" id="addItemBtn" aria-label="Add new item">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
      </button>
    </div>
    <div class="header__right">
      <span class="header__updated" id="lastUpdated" style="display:none"></span>
      <div class="filter-menu" id="filterMenu">
        <button class="filter-menu__trigger" id="filterToggle" aria-expanded="false" aria-haspopup="true">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
          <span>Filter</span>
          <span class="filter-menu__badge" id="filterBadge"></span>
        </button>
        <div class="filter-menu__panel" id="filterPanel">
          <div class="filter-menu__section">
            <div class="filter-menu__section-title">Category</div>
            <div class="filter-menu__options" id="filterCategories"></div>
          </div>
          <div class="filter-menu__divider"></div>
          <div class="filter-menu__section">
            <div class="filter-menu__section-title">Sort by</div>
            <div class="filter-menu__options" id="filterSort">
              <label class="filter-menu__option"><input type="radio" name="sort" value="priority" checked><span>Priority</span></label>
              <label class="filter-menu__option"><input type="radio" name="sort" value="id"><span>ID</span></label>
              <label class="filter-menu__option"><input type="radio" name="sort" value="name"><span>Name</span></label>
              <label class="filter-menu__option"><input type="radio" name="sort" value="impact"><span>Impact</span></label>
              <label class="filter-menu__option"><input type="radio" name="sort" value="ease"><span>Ease</span></label>
            </div>
          </div>
          <button class="filter-menu__clear" id="filterClear">Clear all</button>
        </div>
      </div>
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <span class="icon" id="themeIcon"></span>
      </button>
      <div class="user-menu" id="userMenu" style="display:none">
        <button class="user-avatar" id="userAvatar" aria-label="User menu">
          <img src="" alt="" id="userAvatarImg" style="display:none">
          <span class="user-initials" id="userInitials"></span>
        </button>
        <div class="user-dropdown" id="userDropdown">
          <div class="user-dropdown__info">
            <div class="user-dropdown__name" id="dropdownName"></div>
            <div class="user-dropdown__email" id="dropdownEmail"></div>
            <div class="user-dropdown__role" id="dropdownRole"></div>
          </div>
          <div class="user-dropdown__divider"></div>
          <button class="user-dropdown__item" id="menuLogout">Log out</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Kanban Board -->
  <div class="kanban" id="kanban">
    <div class="loading-state" id="loadingState">
      <div class="spinner"></div>
      <span>Loading roadmap...</span>
    </div>
  </div>

  <!-- Detail Modal -->
  <div class="modal-overlay" id="detailModal">
    <div class="modal">
      <div class="modal__header">
        <h2 class="modal__header-title" id="detailTitle"></h2>
        <button class="modal__close" id="detailClose">&times;</button>
      </div>
      <div class="modal__body" id="detailBody"></div>
      <div class="modal__footer" id="detailFooter"></div>
    </div>
  </div>

  <!-- Quick-Add Modal -->
  <div class="modal-overlay" id="addModal">
    <div class="modal">
      <div class="modal__header">
        <h2 class="modal__header-title">Add New Item</h2>
        <button class="modal__close" id="addClose">&times;</button>
      </div>
      <div class="modal__body">
        <form id="addForm">
          <div class="form__group">
            <label class="form__label">Name <span class="required">*</span></label>
            <input class="form__input" type="text" name="name" required placeholder="Initiative name">
          </div>
          <div class="form__row">
            <div class="form__group">
              <label class="form__label">Category</label>
              <select class="form__select" name="category" id="addCategory">
                <option value="Uncategorized">Uncategorized</option>
              </select>
            </div>
            <div class="form__group">
              <label class="form__label">Status</label>
              <select class="form__select" name="status">
                <option value="BACKLOG">Backlog</option>
                <option value="PLANNED">Planned</option>
                <option value="NEXT">Next</option>
                <option value="IN_PROGRESS">In Progress</option>
                <option value="DONE">Done</option>
              </select>
            </div>
          </div>
          <div class="form__group">
            <label class="form__label">Description</label>
            <textarea class="form__textarea" name="description" placeholder="What does it do?"></textarea>
          </div>
          <div class="form__group">
            <label class="form__label">Business Impact</label>
            <textarea class="form__textarea" name="business_impact" placeholder="Why does it matter?"></textarea>
          </div>
          <div class="form__row">
            <div class="form__group">
              <label class="form__label">Impact (0-10)</label>
              <input class="form__input" type="number" name="impact_score" min="0" max="10" step="0.1" placeholder="0">
            </div>
            <div class="form__group">
              <label class="form__label">Ease (0-10)</label>
              <input class="form__input" type="number" name="ease_score" min="0" max="10" step="0.1" placeholder="0">
            </div>
            <div class="form__group">
              <label class="form__label">Priority (0-10)</label>
              <input class="form__input" type="number" name="priority_score" min="0" max="10" step="0.1" placeholder="0">
            </div>
          </div>
          <div class="form__row">
            <div class="form__group">
              <label class="form__label">Build Time</label>
              <input class="form__input" type="text" name="build_time" placeholder="e.g. 2-3 hrs">
            </div>
            <div class="form__group">
              <label class="form__label">Expected Delivery</label>
              <input class="form__input" type="date" name="expected_delivery">
            </div>
          </div>
          <div class="form__group">
            <label class="form__label">Dependencies</label>
            <input class="form__input" type="text" name="dependencies" placeholder="e.g. Health Scoring (#18)">
          </div>
        </form>
      </div>
      <div class="modal__footer">
        <button class="btn btn--outline" id="addCancel" type="button">Cancel</button>
        <button class="btn btn--primary" id="addSubmit" type="button">Create</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="/static/confetti.min.js"></script>
  <script src="auth.js?v=2"></script>
  <script src="app.js?v=3"></script>
</body>
</html>
